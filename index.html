<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>RiverVill PD - OSINT Session</title>
    <style>
        :root {
            --win-gray: #c0c0c0; /* –ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π —Å–µ—Ä—ã–π */
            --win-dark: #808080;
            --term-green: #00ff00;
            --text-black: #050505;
        }

        body, html { 
            margin: 0; padding: 0; width: 100%; height: 100%; 
            background: #000; font-family: 'Courier New', monospace; overflow: hidden;
        }

        /* –≠–§–§–ï–ö–¢–´ –ú–û–ù–ò–¢–û–†–ê */
        .crt-filter {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.1) 50%),
                        linear-gradient(90deg, rgba(255, 0, 0, 0.02), rgba(0, 255, 0, 0.01), rgba(0, 0, 255, 0.02));
            z-index: 5000; background-size: 100% 2px, 2px 100%; pointer-events: none;
        }

        /* –î–ò–°–ö–õ–ï–ô–ú–ï–† */
        #disclaimer {
            position: fixed; width: 100%; height: 100%; background: #000;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            z-index: 9999; color: white; text-align: center; padding: 20px;
        }

        /* –í–ï–†–•–ù–Ø–Ø –ü–ê–ù–ï–õ–¨ */
        #top-bar {
            background: var(--win-gray);
            border-bottom: 2px solid var(--win-dark);
            color: var(--text-black);
            padding: 5px 15px;
            display: flex; justify-content: space-between;
            font-size: 13px; font-weight: bold;
        }

        /* –†–ê–ë–û–ß–ò–ô –°–¢–û–õ */
        #os-interface { display: none; height: 100%; background: #222; }
        
        #desktop {
            height: calc(100% - 30px);
            background-color: #3a6ea5; /* –°–∏–Ω–∏–π —Ü–≤–µ—Ç –∫–∞–∫ –≤ —Å—Ç–∞—Ä–æ–π Windows */
            position: relative; padding: 20px;
        }

        .icon {
            width: 80px; text-align: center; color: white; cursor: pointer;
            margin-bottom: 20px; filter: drop-shadow(2px 2px 2px black);
        }

        /* –û–ö–ù–ê */
        .window {
            position: absolute; background: var(--win-gray);
            border: 2px solid #fff; border-right: 2px solid var(--win-dark); 
            border-bottom: 2px solid var(--win-dark);
            display: none; flex-direction: column; z-index: 100;
        }

        .title-bar {
            background: #000080; color: white; padding: 3px 8px;
            display: flex; justify-content: space-between; font-size: 12px;
        }

        .content { padding: 10px; color: black; overflow-y: auto; max-height: 300px; }

        /* 2D –†–ï–ñ–ò–ú (CANVAS) */
        #room-view {
            display: none; position: fixed; top: 0; left: 0;
            width: 100%; height: 100%; background: #111; z-index: 200;
        }
        canvas { display: block; margin: auto; background: #222; border: 4px solid #444; }

    </style>
</head>
<body>

    <div class="crt-filter"></div>

    <div id="disclaimer">
        <h2 style="color: red;">WARNING / –í–ù–ò–ú–ê–ù–ò–ï</h2>
        <p>–≠—Ç–∞ –∏–≥—Ä–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç —ç–ª–µ–º–µ–Ω—Ç—ã —Ö–æ—Ä—Ä–æ—Ä–∞, –≤–Ω–µ–∑–∞–ø–Ω—ã–µ –∑–≤—É–∫–∏ –∏ –º–µ—Ä—Ü–∞—é—â–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è.</p>
        <p>This game contains horror elements, loud noises, and flickering lights.</p>
        <button onclick="hideDisclaimer()" style="padding: 10px 20px; cursor:pointer;">I UNDERSTAND / –Ø –ü–û–ù–ò–ú–ê–Æ</button>
    </div>

    <div id="os-interface">
        <div id="top-bar">
            <div>RiverVill PD - OSINT v1.2</div>
            <div>User 1 Conor - OSINT Session | üåßÔ∏è Rain, 12¬∞C</div>
        </div>

        <div id="desktop">
            <div class="icon" onclick="openWin('mail-win')">üì¨<br>Mail</div>
            <div class="icon" onclick="openWin('archive-win')">üìÇ<br>Archive</div>
            <div class="icon" style="position: absolute; bottom: 40px; right: 40px;" onclick="goToRoom()">üö∂<br>STAND UP</div>
            
            <div id="mail-win" class="window" style="width: 450px; top: 50px; left: 50px;">
                <div class="title-bar"><span>InBox</span><span onclick="closeWin('mail-win')" style="cursor:pointer">[X]</span></div>
                <div class="content" id="mail-list">
                    <div onclick="showMail('cmd')" style="cursor:pointer; border-bottom:1px solid #888;">> Commander: Welcome</div>
                    <div onclick="showMail('lisa')" style="cursor:pointer; color: red;">> [UNKNOWN]: HELP ME</div>
                </div>
                <div id="mail-body" class="content" style="border-top: 2px solid var(--win-dark); display:none;"></div>
            </div>
        </div>
    </div>

    <div id="room-view">
        <div style="color: white; text-align: center; padding: 10px;">[WASD] to Move | [ESC] to sit back</div>
        <canvas id="gameCanvas" width="800" height="600"></canvas>
    </div>

    <script>
        let currentMode = 'Novice';
        let attempts = 5;
        let isStoryMode = false;

        function hideDisclaimer() {
            document.getElementById('disclaimer').style.display = 'none';
            document.getElementById('os-interface').style.display = 'block';
        }

        function openWin(id) { document.getElementById(id).style.display = 'flex'; }
        function closeWin(id) { document.getElementById(id).style.display = 'none'; }

        // –ü–æ—á—Ç–∞
        const emails = {
            cmd: "–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π, –Ω–æ–≤–∏—á–æ–∫. –¢–≤–æ—è —Ü–µ–ª—å ‚Äî –õ–∏–∑–∞ –°–∏–Ω. –ù–∞–π–¥–∏ –µ—ë, –ø–æ–∫–∞ –æ–Ω–∞ –Ω–µ –Ω–∞—à–ª–∞ —Ç–µ–±—è.",
            lisa: "–ó–¥—Ä–∞—Å—Ç–≤—É–π—Ç–µ, —è –æ–±—Ä–∞—â–∞—é—Å—å –∫ –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç—É –ø–æ–ª–∏—Ü–∏–∏... –º–æ—è –ª–∞–±–æ—Ä–æ—Ç–æ—Ä–∏—è –º–æ–∂–µ—Ç –∑–∞–Ω–∏–º–∞—Ç—å—Å—è –Ω–µ–ª–µ–≥–∞–ª—å—â–∏–Ω–æ–π. –ü–û–ú–û–ì–ò–¢–ï! (–û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –º–µ—Å—è—Ü –Ω–∞–∑–∞–¥)"
        };

        function showMail(id) {
            const body = document.getElementById('mail-body');
            body.style.display = 'block';
            body.innerText = emails[id];
        }

        // --- 2D –î–í–ò–ñ–ï–ö (–£–ü–†–û–©–ï–ù–ù–´–ô) ---
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        let player = { x: 400, y: 300, size: 40, speed: 4 };

        function goToRoom() {
            document.getElementById('os-interface').style.display = 'none';
            document.getElementById('room-view').style.display = 'block';
            gameLoop();
        }

        window.addEventListener('keydown', (e) => {
            if(e.key === 'w') player.y -= player.speed;
            if(e.key === 's') player.y += player.speed;
            if(e.key === 'a') player.x -= player.speed;
            if(e.key === 'd') player.x += player.speed;
            if(e.key === 'Escape') {
                document.getElementById('room-view').style.display = 'none';
                document.getElementById('os-interface').style.display = 'block';
            }
        });

        function gameLoop() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // –†–∏—Å—É–µ–º –ø–æ–ª –∫–æ–º–Ω–∞—Ç—ã
            ctx.fillStyle = '#333';
            ctx.fillRect(50, 50, 700, 500);

            // –†–∏—Å—É–µ–º "–ë–æ—Ä–æ–¥–∞—Ç–æ–≥–æ –ö–æ–Ω–æ—Ä–∞" (–ø–æ–∫–∞ –∫–≤–∞–¥—Ä–∞—Ç–∏–∫ —Å –±–æ—Ä–æ–¥–æ–π)
            ctx.fillStyle = "#d2b48c"; // –ö–æ–∂–∞
            ctx.fillRect(player.x, player.y, player.size, player.size);
            ctx.fillStyle = "#4b2e1e"; // –ë–æ—Ä–æ–¥–∞
            ctx.fillRect(player.x, player.y + 25, player.size, 15);
            ctx.fillStyle = "blue"; // –ì–ª–∞–∑–∞ (—Å–æ–Ω–Ω—ã–µ)
            ctx.fillRect(player.x + 5, player.y + 10, 10, 2);
            ctx.fillRect(player.x + 25, player.y + 10, 10, 2);

            requestAnimationFrame(gameLoop);
        }
    </script>
</body>
</html>
