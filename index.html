<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>RiverVill PD - Terminal 1.0.2</title>
    <style>
        :root {
            --win-gray: #c0c0c0;
            --win-dark: #808080;
            --win-blue: #000080;
            --term-green: #33ff33;
        }

        body, html { margin: 0; padding: 0; width: 100%; height: 100%; background: #000; font-family: 'Courier New', monospace; overflow: hidden; }

        .crt-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.1) 50%),
                        linear-gradient(90deg, rgba(255, 0, 0, 0.03), rgba(0, 255, 0, 0.01), rgba(0, 0, 255, 0.03));
            z-index: 9999; background-size: 100% 3px, 3px 100%; pointer-events: none; opacity: 0.5;
        }

        /* –ú–ï–ù–Æ –í–´–ë–û–†–ê */
        #boot-screen {
            position: fixed; width: 100%; height: 100%; background: #050505;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            z-index: 5000; color: var(--term-green);
        }
        .boot-box { border: 2px solid var(--term-green); padding: 40px; background: #000; text-align: center; }
        .boot-btn { 
            background: transparent; color: var(--term-green); border: 1px solid var(--term-green); 
            padding: 10px 25px; margin: 10px; cursor: pointer; transition: 0.2s; font-family: inherit;
        }
        .boot-btn.selected { background: var(--term-green); color: #000; box-shadow: 0 0 15px var(--term-green); }
        #start-btn { margin-top: 30px; display: none; border-width: 3px; }

        /* –ò–ù–¢–ï–†–§–ï–ô–° –û–° */
        #os-interface { display: none; height: 100%; flex-direction: column; }
        #top-bar { background: var(--win-gray); border-bottom: 2px solid var(--win-dark); color: #000; padding: 5px 15px; display: flex; justify-content: space-between; font-size: 12px; font-weight: bold; }
        #desktop { flex-grow: 1; background: #3a6ea5; position: relative; }
        
        .desktop-icon { width: 80px; margin: 20px; text-align: center; color: white; cursor: pointer; text-shadow: 1px 1px 2px black; font-size: 12px; }
        .icon-pic { font-size: 40px; margin-bottom: 5px; display: block; }

        .window { position: absolute; background: var(--win-gray); border: 2px solid #fff; border-right: 2px solid var(--win-dark); border-bottom: 2px solid var(--win-dark); display: none; flex-direction: column; z-index: 100; }
        .title-bar { background: var(--win-blue); color: white; padding: 4px 8px; display: flex; justify-content: space-between; font-size: 12px; }
        .content { padding: 15px; color: black; background: white; margin: 2px; border: 1px solid var(--win-dark); overflow-y: auto; white-space: pre-wrap; font-size: 14px; line-height: 1.5; }

        #room-view { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000; z-index: 4000; }
        canvas { display: block; }
    </style>
</head>
<body>

<div class="crt-overlay"></div>

<div id="boot-screen">
    <div class="boot-box">
        <h1>RIVERVILL SYSTEM v2.2</h1>
        <p>–í–´–ë–ï–†–ò–¢–ï –Ø–ó–´–ö</p>
        <button class="boot-btn" id="lang-ru" onclick="selectLang('ru')">–†–£–°–°–ö–ò–ô</button>
        <button class="boot-btn" id="lang-en" onclick="selectLang('en')">ENGLISH</button>
        <p>–†–ï–ñ–ò–ú –ü–†–ò–°–£–¢–°–¢–í–ò–Ø</p>
        <button class="boot-btn" id="diff-novice" onclick="selectDiff('Novice')">–û–ë–´–ß–ù–´–ô</button>
        <button class="boot-btn" id="diff-story" onclick="selectDiff('Story')">–ò–°–¢–û–†–ò–Ø</button>
        <br>
        <button class="boot-btn" id="start-btn" onclick="startGame()">–í–û–ô–¢–ò –í –ü–£–°–¢–û–¢–£</button>
    </div>
</div>

<div id="os-interface">
    <div id="top-bar">
        <div>RVPD Terminal - User: Conor</div>
        <div id="status-text">12¬∞C | –°–Ω–∞—Ä—É–∂–∏ –≤—Å—ë —Å–ø–æ–∫–æ–π–Ω–æ...</div>
    </div>
    <div id="desktop">
        <div style="display: flex; flex-direction: column;">
            <div class="desktop-icon" onclick="openWin('mail-win')"><span class="icon-pic">üì¨</span><span>–ü–æ—á—Ç–∞</span></div>
            <div class="desktop-icon" onclick="openWin('archive-win')"><span class="icon-pic">üóÑÔ∏è</span><span>–ê—Ä—Ö–∏–≤</span></div>
        </div>
        <button onclick="enterRoom()" style="position: absolute; bottom: 20px; right: 20px; padding: 10px; cursor: pointer;">–í–°–¢–ê–¢–¨ –° –ö–†–ï–°–õ–ê</button>

        <div id="mail-win" class="window" style="width: 550px; left: 100px; top: 50px;">
            <div class="title-bar"><span>–í—Ö–æ–¥—è—â–∏–µ</span><button onclick="closeWin('mail-win')">X</button></div>
            <div class="content" style="height: 380px;" id="mail-body"></div>
        </div>

        <div id="archive-win" class="window" style="width: 500px; left: 150px; top: 100px;">
            <div class="title-bar"><span>Case_Archive_#049</span><button onclick="closeWin('archive-win')">X</button></div>
            <div id="archive-body" class="content" style="height: 380px;"></div>
        </div>
    </div>
</div>

<div id="room-view">
    <canvas id="gameCanvas"></canvas>
</div>

<script>
    let currentLang = null;
    let currentDiff = null;

    const data = {
        ru: {
            cmd: "–ó–¥–æ—Ä–æ–≤–æ, –ö–æ–Ω–æ—Ä. –ü—è–ª–∏—à—å—Å—è –≤ –º–æ–Ω–∏—Ç–æ—Ä? –ú–æ–ª–æ–¥–µ—Ü, —Ö–æ—Ç—å –∫—Ç–æ-—Ç–æ –¥–µ–ª–∞–µ—Ç –≤–∏–¥, —á—Ç–æ –Ω–∞–º –Ω–µ –≤—Å—ë —Ä–∞–≤–Ω–æ. –ó–∞ –æ–∫–Ω–æ–º –ª—é–¥–∏ —Ö–æ–¥—è—Ç, —É–ª—ã–±–∞—é—Ç—Å—è, –ø–æ–∫—É–ø–∞—é—Ç —á–µ—Ä—Ç–æ–≤ –∫–æ—Ñ–µ –∏ –∑–Ω–∞—Ç—å –Ω–µ –∑–Ω–∞—é—Ç, —á—Ç–æ –ø–æ–¥ –∏—Ö –Ω–æ–≥–∞–º–∏ –≥–æ—Ä–æ–¥ –≥–Ω–∏–µ—Ç. –Ø –∫–æ–º–∞–Ω–¥–∏—Ä, –Ω–æ —Ç–æ–ª–∫—É –æ—Ç —ç—Ç–æ–≥–æ... –ö–æ—Ä–æ—á–µ, —Ä–∞–∑–≥—Ä–µ–±–∞–π —ç—Ç–æ –¥–µ—Ä—å–º–æ —Å –õ–∏–∑–æ–π –°–∏–Ω. –í—Å–µ–º –Ω–∞–≤–µ—Ä—Ö—É –ø–ª–µ–≤–∞—Ç—å, –æ–Ω–∏ —Ö–æ—Ç—è—Ç —Ç–æ–ª—å–∫–æ —Ü–∏—Ñ—Ä—ã –≤ –æ—Ç—á–µ—Ç–∞—Ö. –ù–æ —è-—Ç–æ –∑–Ω–∞—é, —á—Ç–æ —Ç—ã ‚Äî –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π, –∫–æ–º—É –µ—â–µ –Ω–µ –ª–µ–Ω—å –∫–æ–ø–∞—Ç—å. –ù–∞–π–¥–∏ –µ—ë, –ö–æ–Ω–æ—Ä. –ü—Ä–æ—Å—Ç–æ –ø–æ—Å—Ç–∞—Ä–∞–π—Å—è –Ω–µ —Å–¥–æ—Ö–Ω—É—Ç—å, –ª–∞–¥–Ω–æ? –ê —Ç–æ –æ—Ç—á–µ—Ç—ã –ø–∏—Å–∞—Ç—å –±—É–¥–µ—Ç –Ω–µ–∫–æ–º—É. –£–¥–∞—á–∏, –º–∞—Ç—å –µ—ë.",
            lisa_mail: "–Ø –ø–∏—à—É —ç—Ç–æ, –∏ –º–Ω–µ –∫–∞–∂–µ—Ç—Å—è, —á—Ç–æ —è —É–∂–µ –º–µ—Ä—Ç–≤–∞. X-Network... –æ–Ω–∏ –Ω–µ –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è, –æ–Ω–∏ –≥—Ä–µ–±–∞–Ω—ã–µ –º—è—Å–Ω–∏–∫–∏. –í—Å–µ–º –ø–ª–µ–≤–∞—Ç—å. –Ø –∑–≤–æ–Ω–∏–ª–∞ –≤ –ø–æ–ª–∏—Ü–∏—é —Ç—Ä–∏–∂–¥—ã, –∏ –¥–µ–∂—É—Ä–Ω—ã–π –ø—Ä–æ—Å—Ç–æ –ø–æ—Å–º–µ—è–ª—Å—è. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞... –µ—Å–ª–∏ —ç—Ç–æ—Ç —Ç–µ–∫—Å—Ç —á–∏—Ç–∞–µ—Ç —á–µ–ª–æ–≤–µ–∫, –∞ –Ω–µ —Å–∏—Å—Ç–µ–º–Ω—ã–π –±–æ—Ç ‚Äî —Å–¥–µ–ª–∞–π—Ç–µ —Ö–æ—Ç—å —á—Ç–æ-–Ω–∏–±—É–¥—å. –Ø –Ω–µ —Ö–æ—á—É –ø—Ä–æ—Å—Ç–æ –∏—Å—á–µ–∑–Ω—É—Ç—å. (–ú–µ—Å—è—Ü –Ω–∞–∑–∞–¥. –û—Ç–≤–µ—Ç–∞ –Ω–µ—Ç. –î–∞ –∏ –∫–æ–º—É –æ–Ω –Ω—É–∂–µ–Ω?)",
            case: "–û–ë–™–ï–ö–¢: –õ–∏–∑–∞ –°–∏–Ω. \n\n–ü—Ä–æ–ø–∞–ª–∞ –±–µ–∑ –≤–µ—Å—Ç–∏. –ó–Ω–∞–µ—à—å, –∏—Ä–æ–Ω–∏—è –≤ —Ç–æ–º, —á—Ç–æ –µ—ë —Ä–æ–¥–∏—Ç–µ–ª–∏ –¥–æ —Å–∏—Ö –ø–æ—Ä –¥—É–º–∞—é—Ç, —á—Ç–æ –æ–Ω–∞ –Ω–∞ —Å—Ç–∞–∂–∏—Ä–æ–≤–∫–µ. –ú—ã –ø–∏—à–µ–º —Ä–∞–ø–æ—Ä—Ç—ã, –º–∞—Ç–µ—Ä–∏–º—Å—è –≤ –∫—É—Ä–∏–ª–∫–µ, –∞ –∑–∞ –¥–≤–µ—Ä—å—é —É—á–∞—Å—Ç–∫–∞ —Ç–µ—á–µ—Ç –æ–±—ã—á–Ω–∞—è –∂–∏–∑–Ω—å. –í—Å–µ–º –ø–æ—Ö—Ä–µ–Ω. –ö–æ–Ω–æ—Ä, —Ç–µ–±—è –∫–∏–Ω—É–ª–∏ –Ω–∞ —ç—Ç–æ –¥–µ–ª–æ, –ø–æ—Ç–æ–º—É —á—Ç–æ —Ç—ã –Ω–æ–≤–µ–Ω—å–∫–∏–π –∏ –µ—â–µ –Ω–µ –Ω–∞—É—á–∏–ª—Å—è –∑–∞–∫—Ä—ã–≤–∞—Ç—å –≥–ª–∞–∑–∞ –Ω–∞ –∑–∞–ø–∞—à–æ–∫ —Ç—É—Ö–ª—è—Ç–∏–Ω—ã. –≠—Ç–æ –¥–µ–ª–æ ‚Äî –≤–∏—Å—è–∫, –æ—Ç –∫–æ—Ç–æ—Ä–æ–≥–æ –≤—Å–µ –æ—Ç–∫—Ä–µ—Å—Ç–∏–ª–∏—Å—å. –í–Ω–∏–∫–∞–π, –Ω–æ –ø–æ–º–Ω–∏: –µ—Å–ª–∏ —Ç—ã –ø—Ä–æ–ø–∞–¥–µ—à—å, –≥–æ—Ä–æ–¥ –¥–∞–∂–µ –Ω–µ –∑–∞–º–µ—Ç–∏—Ç. –ë–µ—Ä–µ–≥–∏ —Å–µ–±—è, –ø–∞—Ä–µ–Ω—å.",
            weather: "User 1 Conor | üåßÔ∏è –î–æ–∂–¥—å, 12¬∞C"
        },
        en: {
            cmd: "Hey, Conor. Staring at the screen? Good for you. Outside, people are smiling, buying damn coffee, having no clue the city is rotting. I'm the commander, but what's it worth? Just deal with this Lisa Sin crap. The higher-ups don't care, they just want stats. But I know you're the only one left who actually gives a damn. Find her, Conor. Try not to die, okay? I hate paperwork. Good luck.",
            lisa_mail: "I feel like I'm already dead. X-Network... they aren't scientists, they're butchers. Nobody cares. I called the PD thrice, and they just laughed. Please... if a human is reading this ‚Äî do something. I don't want to just vanish. (1 month ago. No reply.)",
            case: "SUBJECT: Lisa Sin. \n\nMissing. The irony? Her parents still think she's interning. We write reports, we curse in the smoking room, while life goes on outside. Nobody gives a shit. Conor, they gave you this case because you're the only one who hasn't learned to ignore the smell of rot yet. Dig in, but remember: if you vanish, the city won't even blink. Stay safe, kid.",
            weather: "User 1 Conor | üåßÔ∏è Rain, 12¬∞C"
        }
    };

    function selectLang(l) {
        currentLang = l;
        document.querySelectorAll('.boot-btn[id^="lang-"]').forEach(b => b.classList.remove('selected'));
        document.getElementById('lang-' + l).classList.add('selected');
        checkStart();
    }

    function selectDiff(d) {
        currentDiff = d;
        document.querySelectorAll('.boot-btn[id^="diff-"]').forEach(b => b.classList.remove('selected'));
        document.getElementById('diff-' + d.toLowerCase()).classList.add('selected');
        checkStart();
    }

    function checkStart() { if(currentLang && currentDiff) document.getElementById('start-btn').style.display = 'inline-block'; }

    function startGame() {
        document.getElementById('boot-screen').style.display = 'none';
        document.getElementById('os-interface').style.display = 'flex';
        document.getElementById('mail-body').innerHTML = `<strong>–û–¢: –ö–æ–º–∞–Ω–¥–∏—Ä (—Ç–æ—Ç, –∫–æ–º—É –Ω–µ –ø–æ—Ö—Ä–µ–Ω)</strong><br>${data[currentLang].cmd}<hr><strong style="color:red">–û–¢: –õ–∏–∑–∞ –°–∏–Ω (–ü—Ä–∏–∑—Ä–∞–∫)</strong><br>${data[currentLang].lisa_mail}`;
        document.getElementById('archive-body').innerHTML = `<strong>–û–¢–ß–ï–¢_#049 (–ì–ù–ò–õ–û–ï –î–ï–õ–û)</strong><br><br>${data[currentLang].case}`;
    }

    function openWin(id) { document.getElementById(id).style.display = 'flex'; }
    function closeWin(id) { document.getElementById(id).style.display = 'none'; }

    // --- 2D –î–í–ò–ñ–û–ö ---
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');
    let player = { x: 400, y: 500, speed: 6, frame: 0 };
    let keys = {};

    window.onkeydown = (e) => { keys[e.key.toLowerCase()] = true; if((e.key === 'e' || e.key === '—É') && player.y > 450) exitRoom(); };
    window.onkeyup = (e) => keys[e.key.toLowerCase()] = false;

    function enterRoom() {
        document.getElementById('os-interface').style.display = 'none';
        document.getElementById('room-view').style.display = 'block';
        canvas.width = window.innerWidth; canvas.height = window.innerHeight;
        requestAnimationFrame(gameLoop);
    }
    function exitRoom() { document.getElementById('room-view').style.display = 'none'; document.getElementById('os-interface').style.display = 'flex'; }

    function gameLoop() {
        if(document.getElementById('room-view').style.display === 'none') return;
        if(keys['w'] || keys['—Ü']) player.y -= player.speed;
        if(keys['s'] || keys['—ã']) player.y += player.speed;
        if(keys['a'] || keys['—Ñ']) player.x -= player.speed;
        if(keys['d'] || keys['–≤']) player.x += player.speed;
        player.frame += 0.05;

        ctx.fillStyle = "#0a0a0a"; ctx.fillRect(0,0,canvas.width, canvas.height);
        
        // –û–∫–Ω–æ (–∏—Ä–æ–Ω–∏—è - —Ç–∞–º –¥–æ–∂–¥—å –∏ —Å–ø–æ–∫–æ–π—Å—Ç–≤–∏–µ)
        ctx.fillStyle = "#001a33"; ctx.fillRect(canvas.width/2 - 100, 40, 200, 80);
        ctx.strokeStyle = "rgba(255,255,255,0.2)";
        for(let i=0; i<5; i++) {
            let dy = 40 + (player.frame*30 + i*30)%80;
            ctx.beginPath(); ctx.moveTo(canvas.width/2-50+i*20, dy); ctx.lineTo(canvas.width/2-52+i*20, dy+10); ctx.stroke();
        }

        // –°—Ç–æ–ª –ö–æ–Ω–æ—Ä–∞
        ctx.fillStyle = "#333"; ctx.fillRect(canvas.width/2 - 80, 520, 160, 80);
        ctx.fillStyle = "#33ff33"; ctx.fillRect(canvas.width/2 - 40, 515, 80, 5);

        // –ö–æ–Ω–æ—Ä
        let breath = Math.sin(player.frame*2)*2;
        ctx.fillStyle = "#d2b48c"; ctx.fillRect(player.x, player.y+breath, 40, 40);
        ctx.fillStyle = "#3e2723"; ctx.fillRect(player.x, player.y+25+breath, 40, 15);
        ctx.fillStyle = "black"; ctx.fillRect(player.x+8, player.y+12+breath, 10, 2); ctx.fillRect(player.x+22, player.y+12+breath, 10, 2);
        
        requestAnimationFrame(gameLoop);
    }
</script>
</body>
</html>
