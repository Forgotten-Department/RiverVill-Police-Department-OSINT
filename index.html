<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>RiverVill Police Department - OSINT</title>
    <style>
        :root {
            --win-gray: #c0c0c0;
            --win-dark: #808080;
            --win-blue: #000080;
            --term-green: #33ff33;
        }

        body, html { 
            margin: 0; padding: 0; width: 100%; height: 100%; 
            background: #000; font-family: 'Courier New', monospace; overflow: hidden;
        }

        /* –≠–§–§–ï–ö–¢–´ –ú–û–ù–ò–¢–û–†–ê */
        .crt-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.15) 50%),
                        linear-gradient(90deg, rgba(255, 0, 0, 0.03), rgba(0, 255, 0, 0.01), rgba(0, 0, 255, 0.03));
            z-index: 5000; background-size: 100% 3px, 3px 100%; pointer-events: none;
        }

        .flicker { animation: flickerAnim 0.15s infinite; }
        @keyframes flickerAnim { 0% { opacity: 0.98; } 50% { opacity: 1; } 100% { opacity: 0.99; } }

        /* –≠–ö–†–ê–ù –í–´–ë–û–†–ê (–û–†–ò–ì–ò–ù–ê–õ–¨–ù–´–ô) */
        #boot-screen {
            position: fixed; width: 100%; height: 100%; background: #000;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            z-index: 4000; text-align: center; color: var(--term-green);
        }

        .boot-box { border: 2px solid var(--term-green); padding: 40px; background: rgba(0,20,0,0.5); }
        .boot-btn { 
            background: transparent; color: var(--term-green); border: 1px solid var(--term-green);
            padding: 10px 25px; margin: 10px; cursor: pointer; font-size: 16px;
        }
        .boot-btn:hover { background: var(--term-green); color: #000; }

        /* –û–°–ù–û–í–ù–û–ô –ò–ù–¢–ï–†–§–ï–ô–° */
        #os-interface { display: none; height: 100%; flex-direction: column; }

        #top-bar {
            background: var(--win-gray); border-bottom: 2px solid var(--win-dark);
            color: #000; padding: 5px 15px; display: flex; justify-content: space-between;
            font-size: 13px; font-weight: bold;
        }

        #desktop {
            flex-grow: 1; background: #3a6ea5; position: relative; padding: 20px;
            background-image: url('https://www.transparenttextures.com/patterns/carbon-fibre.png'); /* –ù–µ–º–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç—É—Ä—ã */
        }

        /* –ò–ö–û–ù–ö–ò */
        .icon {
            width: 90px; text-align: center; color: white; cursor: pointer;
            margin-bottom: 30px; text-shadow: 1px 1px 2px black;
        }
        .icon:hover { background: rgba(255,255,255,0.1); outline: 1px dashed #fff; }

        /* –û–ö–ù–ê –í –°–¢–ò–õ–ï –°–¢–ê–†–û–ì–û WINDOWS */
        .window {
            position: absolute; background: var(--win-gray);
            border: 2px solid #fff; border-right: 2px solid var(--win-dark); 
            border-bottom: 2px solid var(--win-dark);
            display: none; flex-direction: column; box-shadow: 4px 4px 10px rgba(0,0,0,0.5);
        }

        .title-bar {
            background: var(--win-blue); color: white; padding: 4px 8px;
            display: flex; justify-content: space-between; font-size: 12px;
        }

        .close-btn { background: var(--win-gray); border: 1px solid #000; cursor: pointer; width: 16px; height: 16px; line-height: 12px; text-align: center; font-size: 10px; }

        .content { padding: 15px; color: black; overflow-y: auto; background: white; margin: 2px; border: 1px solid var(--win-dark); }

        /* 2D –†–ï–ñ–ò–ú */
        #room-view {
            display: none; position: fixed; top: 0; left: 0;
            width: 100%; height: 100%; background: #050505; z-index: 6000;
        }
    </style>
</head>
<body class="flicker">

    <div class="crt-overlay"></div>

    <div id="boot-screen">
        <div class="boot-box">
            <h1>RIVERVILL PD - BOOT MENU</h1>
            <p>–í–´–ë–ï–†–ò–¢–ï –Ø–ó–´–ö / SELECT LANGUAGE</p>
            <button class="boot-btn" onclick="initApp('ru')">–†–£–°–°–ö–ò–ô</button>
            <button class="boot-btn" onclick="initApp('en')">ENGLISH</button>
            <p>–í–´–ë–ï–†–ò–¢–ï –°–õ–û–ñ–ù–û–°–¢–¨ / DIFFICULTY</p>
            <button class="boot-btn" onclick="setDiff('Novice')">–ù–û–í–ò–ß–ï–ö</button>
            <button class="boot-btn" onclick="setDiff('Story')">STORY MODE</button>
        </div>
    </div>

    <div id="os-interface">
        <div id="top-bar">
            <div>RiverVill Police Department - OSINT</div>
            <div id="session-info">User 1 Conor - OSINT Session | üåßÔ∏è –î–æ–∂–¥—å, 12¬∞C</div>
        </div>

        <div id="desktop">
            <div class="icon" onclick="openWin('mail-win')">üì¨<br>–ü–æ—á—Ç–∞</div>
            <div class="icon" onclick="openWin('archive-win')">üìÇ<br>–ê—Ä—Ö–∏–≤</div>
            
            <div class="icon" style="position: absolute; bottom: 20px; right: 20px;" onclick="toggleRoom(true)">üö∂<br>–í–°–¢–ê–¢–¨</div>

            <div id="mail-win" class="window" style="width: 500px; top: 50px; left: 50px;">
                <div class="title-bar"><span>–í—Ö–æ–¥—è—â–∏–µ - –ü–æ—á—Ç–æ–≤—ã–π –∫–ª–∏–µ–Ω—Ç</span><button class="close-btn" onclick="closeWin('mail-win')">X</button></div>
                <div class="content" style="height: 300px;">
                    <div id="email-list">
                        <div onclick="readEmail(1)" style="cursor:pointer; color: blue; text-decoration: underline; margin-bottom: 10px;">> –û—Ç: –ö–æ–º–∞–Ω–¥–∏—Ä (–í–í–û–î–ù–´–ô –ò–ù–°–¢–†–£–ö–¢–ê–ñ)</div>
                        <div onclick="readEmail(2)" style="cursor:pointer; color: red; text-decoration: underline;">> –û—Ç: –õ–∏–∑–∞ (–ü–û–ú–û–ì–ò–¢–ï!)</div>
                    </div>
                    <hr>
                    <div id="email-view" style="white-space: pre-wrap; font-size: 14px;">–í—ã–±–µ—Ä–∏—Ç–µ –ø–∏—Å—å–º–æ...</div>
                </div>
            </div>

            <div id="archive-win" class="window" style="width: 400px; top: 100px; left: 400px;">
                <div class="title-bar"><span>RiverVill Archive v.1.0</span><button class="close-btn" onclick="closeWin('archive-win')">X</button></div>
                <div class="content">
                    <input type="text" placeholder="–ü–æ–∏—Å–∫ –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º..." style="width: 100%; margin-bottom: 10px;">
                    <div onclick="readEmail(3)" style="cursor:pointer;">üìÑ Lisa_Case.doc</div>
                </div>
            </div>
        </div>
    </div>

    <div id="room-view">
        <div style="color: white; padding: 20px; text-align: center;">–ù–∞–∂–º–∏—Ç–µ [ESC], —á—Ç–æ–±—ã –≤–µ—Ä–Ω—É—Ç—å—Å—è –∑–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä.</div>
        <canvas id="gameCanvas"></canvas>
    </div>

    <script>
        let lang = 'ru';
        let difficulty = 'Novice';

        // –¢–ï–ö–°–¢–´ –°–õ–û–í–û –í –°–õ–û–í–û
        const database = {
            ru: {
                mail1: "–ó–¥—Ä–∞—Å—Ç–≤—É–π –Ω–æ–≤–∏—á–µ–∫, –ø–µ—Ä–µ–¥ —Å–æ–±–æ–π —Ç—ã –≤–∏–¥–µ—à—å —Ä–∞–±–æ—á–∏–π —Å—Ç–æ–ª –≤–µ—Ä–Ω–æ ? –ï—Å–ª–∏ –≤ –∫—Ä–∞—Ç—Ü–µ –∫–∞–∫ –∏ –ø–æ–ª–æ–≥–∞–µ—Ç—å—Å—è –∫–æ–º–∞–Ω–¥–∏—Ä—É —è –æ–±—å—è—Å–Ω—é —Ç–≤–æ—é –∑–∞–¥–∞—á—É –∏ –∫–µ–π—Å –∫–æ—Ç–æ—Ä—ã–π —Ç—ã –¥–æ–ª–∂–µ–Ω —Ä–∞—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å, —Ç–≤–æ—è —Ü–µ–ª—å —ç—Ç–æ —Ä–∞—Å—É–∑–Ω–∞—Ç—å –∫–∞–∫ –º–æ–∂–Ω–æ –±–æ–ª—å—à–µ –æ –Ω–∞—à–µ–π –∂–µ—Ä—Ç–≤–µ –∏–ª–∏ –∂–µ –≤—Ä–∞–≥–µ –∏ –≤ –∏—Ç–æ–≥–µ –µ–≥–æ –Ω–∞–π—Ç–∏.... –ø–æ–∫–∞ –æ–Ω –Ω–µ –Ω–∞—à–µ–ª —Ç–µ–±—è (—Ö–∞—Ö–∞) –Ω–æ –µ—Å–ª–∏ —Ç–µ–±—è –Ω–µ –ø—É–≥–∞—Ç—å —Ç–æ —Ç–∞–∫–æ–µ –ø—Ä–∞–≤–¥–∞ –º–æ–∂–µ—Ç —Å–ª—É—á–∏—Ç—å—Å—è... –í–æ–æ–±—â–µ–º –µ—Å–ª–∏ –±—É–¥—É—Ç –ø–æ—Å—Ç—É–ø–∞—Ç—å –Ω–æ–≤—ã–µ —É–∫–∞–∑–∞–Ω–∏—è –∏–ª–∏ –¥–∏—Ä–µ–∫—Ç–∏–≤—ã —Ç–æ –ø—Ä–æ—á–∏—Ç–∞—Ç—å —Ç—ã –∏—Ö —Å–º–æ–∂–µ—à—å –∑–¥–µ—Å—å... —É —Ç–µ–±—è –µ—â—ë —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ—è–≤–∏—Ç—å—Å—è... –¥–æ –≤—Å—Ç—Ä–µ—á –¥–æ—Ä–æ–π –∞–≥–µ–Ω—Ç –ö–æ–Ω–æ—Ä",
                mail2: "–ó–¥—Ä–∞—Å—Ç–≤—É–π—Ç–µ —è –æ–±—Ä–∞—â–∞—é—Å—å –∫ –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç—É –ø–æ–ª–∏—Ü–∏–∏ —Ç–∞–∫ –∫–∞–∫ —Ö–æ—á—É —Å–æ–æ–±—â–∏—Ç—å —á—Ç–æ –º–æ—è –ª–∞–±–æ—Ä–æ—Ç–æ—Ä–∏—è –∫–æ—Ç–æ—Ä—É—é —è –ø–æ—Å–µ—â–∞—é –º–æ–∂–µ—Ç –∑–∞–Ω–∏–º–∞—Ç—å—Å—è –Ω–µ–ª–µ–≥–∞–ª—å—â–∏–Ω–æ–π.... –ø—Ä–æ—à—É –æ—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ –º–æ–π –∑–∞–ø—Ä–æ—Å, –ø–æ–º–æ–≥–∏—Ç–µ ! (–û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –º–µ—Å—è—Ü –Ω–∞–∑–∞–¥ –≤ 23:45)",
                case: "–ó–¥—Ä–∞—Å—Ç–≤—É–π—Ç–µ –∞–≥–µ–Ω—Ç –ö–æ–Ω–æ—Ä ! –ú—ã —Ö–æ—Ç–∏–º –≤–∞—Å –≤–≤–µ—Å—Ç–∏ –≤ –∫—É—Ä—Å –¥–µ–ª–∞... –í–∞—à–∞ —Ü–µ–ª—å —ç—Ç–æ –õ–∏–∑–∞ –°–∏–Ω, –µ–π 24 –≥–æ–¥–∞ —Ä–∞–Ω–µ–µ –ø—Ä–æ–∂–∏–≤–∞–ª–∞ –≤ –æ–∫—Ä—É–≥–∞—Ö –•–∞–≤–∞–µ–≤, –æ–Ω–∞ –ø—Ä–æ—Ö–æ–¥–∏–ª–∞ —Ç–µ—Å—Ç—ã –≤ –ª–∞–±–æ—Ä–æ—Ç–æ—Ä–∏–∏ X-Network –ø–æ—Å–ª–µ —á–µ–≥–æ –±–µ—Å—Å–ª–µ–¥–Ω–æ –ø—Ä–æ–ø–∞–ª–∞... —Ö–æ–¥—è—Ç —Å–ª—É—Ö–∏ —á—Ç–æ –æ–Ω–∞ –∂–∏–≤–∞ –∏ –∑–∞–±–∏—Ä–∞–µ—Ç —á—É–∂–∏–µ –∂–∏–∑–Ω–∏... –±—É–¥—å –æ—Å—Ç–æ—Ä–æ–∂–µ–Ω –∫–æ–Ω–æ—Ä, –ª–∞–¥—ã?"
            },
            en: {
                mail1: "Hello rookie, you see the desktop in front of you, right? Briefly, as a commander should, I'll explain your task and the case... your goal is to find out as much as possible about our victim or enemy and find them... before they find you (haha). Anyway, if new directives come, you can read them here. Stay safe, Agent Conor.",
                mail2: "Hello, I am contacting the police department to report that the laboratory I visit may be involved in illegal activities... please respond to my request, help me! (Sent one month ago at 23:45)",
                case: "Hello Agent Conor! We want to bring you up to speed... Your target is Lisa Sin, 24 years old, formerly of Hawaii. She was tested at the X-Network lab and vanished... Rumors say she's alive and taking lives. Be careful, Conor, okay?"
            }
        };

        function setDiff(d) { 
            difficulty = d; 
            alert("–°–ª–æ–∂–Ω–æ—Å—Ç—å: " + d); 
        }

        function initApp(l) {
            lang = l;
            document.getElementById('boot-screen').style.display = 'none';
            document.getElementById('os-interface').style.display = 'flex';
            if(lang === 'en') {
                document.getElementById('session-info').innerText = "User 1 Conor - OSINT Session | üåßÔ∏è Rain, 12¬∞C";
            }
        }

        function openWin(id) { document.getElementById(id).style.display = 'flex'; }
        function closeWin(id) { document.getElementById(id).style.display = 'none'; }

        function readEmail(num) {
            const view = document.getElementById('email-view');
            if(num === 1) view.innerText = database[lang].mail1;
            if(num === 2) view.innerText = database[lang].mail2;
            if(num === 3) {
                openWin('mail-win');
                view.innerText = database[lang].case;
            }
        }

        // --- 2D –î–í–ò–ñ–û–ö ---
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        let player = { x: canvas.width/2, y: canvas.height/2, speed: 5 };

        function toggleRoom(show) {
            document.getElementById('room-view').style.display = show ? 'block' : 'none';
            if(show) renderRoom();
        }

        window.addEventListener('keydown', (e) => {
            if(e.key === 'Escape') toggleRoom(false);
            if(e.key === 'w' || e.key === '—Ü') player.y -= player.speed;
            if(e.key === 's' || e.key === '—ã') player.y += player.speed;
            if(e.key === 'a' || e.key === '—Ñ') player.x -= player.speed;
            if(e.key === 'd' || e.key === '–≤') player.x += player.speed;
        });

        function renderRoom() {
            if(document.getElementById('room-view').style.display === 'none') return;
            ctx.fillStyle = '#050505';
            ctx.fillRect(0,0,canvas.width, canvas.height);

            // –ü–µ—Ä—Å–æ–Ω–∞–∂ (–°–æ–Ω–Ω—ã–π –±–æ—Ä–æ–¥–∞—Ç—ã–π –ö–æ–Ω–æ—Ä)
            ctx.fillStyle = "#e0ac69"; // –ö–æ–∂–∞
            ctx.fillRect(player.x, player.y, 40, 40);
            ctx.fillStyle = "#3e2723"; // –ë–æ—Ä–æ–¥–∞
            ctx.fillRect(player.x, player.y + 25, 40, 15);
            ctx.fillStyle = "#000"; // –°–æ–Ω–Ω—ã–µ –≥–ª–∞–∑–∞
            ctx.fillRect(player.x + 8, player.y + 12, 8, 2);
            ctx.fillRect(player.x + 24, player.y + 12, 8, 2);

            requestAnimationFrame(renderRoom);
        }
    </script>
</body>
</html>
